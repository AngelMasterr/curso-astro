---
import Layout from '../../layouts/Layout.astro'
import { getLatestLaunches, getLaunchtBy } from '../../services/spacex'

// Ruta dinamica, aquí vamos a guardar la id de cada lanzamiento

export async function getStaticPaths() {
	// llamar la api externa de spacex para leer las id de cada lanzamiento
	const launches = await getLatestLaunches()

	// Generar las rutas estáticas en función de las ID obtenidas
	return launches.map((launch) => ({
		params: { id: launch.id },
	}))
}

const { id } = Astro.params
console.log(id)

let launch
if (id) {
	launch = await getLaunchtBy({ id })
}

console.log(launch)
---

<Layout title={`lanzamiento ${id}`}>
	<article>
		{launch?.id}
	</article>
</Layout>
